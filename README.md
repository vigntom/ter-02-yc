# Домашнее задание к занятию «Основы Terraform. Yandex Cloud»

## Задание 1

1. Изучите проект. В файле variables.tf объявлены переменные для Yandex provider.

2. Создайте сервисный аккаунт и ключ. service_account_key_file.

3. Сгенерируйте новый или используйте свой текущий ssh-ключ.
Запишите его открытую(public) часть в переменную vms_ssh_public_root_key.

4. Инициализируйте проект, выполните код. Исправьте намеренно допущенные синтаксические ошибки.
Ищите внимательно, посимвольно. Ответьте, в чём заключается их суть.

[Платформы](https://cloud.yandex.com/en/docs/compute/concepts/performance-levels)

5. Подключитесь к консоли ВМ через ssh и выполните команду  curl ifconfig.me.
Примечание: К OS ubuntu "out of a box, те из коробки" необходимо подключаться под пользователем ubuntu: "ssh ubuntu@vm_ip_address". Предварительно убедитесь, что ваш ключ добавлен в ssh-агент: eval $(ssh-agent) && ssh-add Вы познакомитесь с тем как при создании ВМ создать своего пользователя в блоке metadata в следующей лекции.;

6. Ответьте, как в процессе обучения могут пригодиться параметры preemptible = true
и core_fraction=5 в параметрах ВМ.

В качестве решения приложите:
  * скриншот ЛК Yandex Cloud с созданной ВМ, где видно внешний ip-адрес;
  * скриншот консоли, curl должен отобразить тот же внешний ip-адрес;
  * Ответы на вопросы:

  Вопрос 4.  Ошибки.
    * Опечатка в платформе и указана несуществующая платформа. Заменил на standard-v2.
    * Указан неверный параметр cores для выбранной платформы. Поставил 2.

  Вопрос 6. Вопрос про preemptible.
Эти параметры могут применяться в процессе обучения для экономии ресурсов.
Параметр preemptible = true применяется для создания прерываемой ВМ,
которая предоставляется с существенной скидкой. Параметр core_fraction = 5 - это
гарантированная доля vCPU. Значение меньше 100 может использовать для задач
где не требуется гарантии производительности.

## Задание 2

1. Замените все хардкод-значения для ресурсов yandex_compute_image и yandex_compute_instance
на отдельные переменные. К названиям переменных ВМ добавьте в начало префикс vm_web_ . Пример: vm_web_name.
2. Объявите нужные переменные в файле variables.tf, обязательно указывайте тип переменной.
Заполните их default прежними значениями из main.tf.
3. Проверьте terraform plan. Изменений быть не должно.
